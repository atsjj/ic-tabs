<!doctype html public "display of affection">
<meta charset="utf-8">
<title>ic-tabs, dynamic tabs demo</title>
<link rel="stylesheet" href="http://instructure.github.io/ic-ember/shared/styles.css">
<link rel="stylesheet" href="main.css">

<header class="branding padbox">
  <h1>{{ic-tabs}} dynamic demo</h1>
  <h2>an accessible ember tabs component</h2>
  <p>By <a target="_top" href="http://instructure.com">Instructure, Inc</a></p>
  <ul class="navbar" role="nav">
    <li><a href="index.html">basic</a>
    <li><a href="query-params.html">query params</a>
    <li><a href="dynamic.html" class="active">dynamic tabs</a>
  </ul>

</header>

<div id="demo" class="padbox"></div>

<a target="_top" href="https://github.com/instructure/ic-tabs"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github-camo.global.ssl.fastly.net/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>


<script type="text/x-handlebars">
<ul>
  <li>TODO: make this demo more accessible</li>
</ul>

<p>
  Change to the index of the tab to select: {{input type="number" value=selectedTabIndex}}
</p>

{{#ic-tabs selected-index=selectedTabIndex}}
  {{#ic-tab-list}}
    {{#each tabs}}
      {{#ic-tab}}
        <b>{{name}}</b>
        <button {{action "removeTab" this}}>×</button>
      {{/ic-tab}}
    {{/each}}
    <button {{action "editNewTab"}}>add a tab</button>
  {{/ic-tab-list}}

  {{#each tabs}}
    {{#ic-tab-panel}}
      <p>{{description}}</p>
    {{/ic-tab-panel}}
  {{/each}}
{{/ic-tabs}}

{{#if adding}}
  <form id="addTabForm" {{action "saveNewTab" on="submit"}}>
    <p>
       <label for="name">Tab Label:</label><br>
       {{input value=newTab.name}}
    </p>
    <p>
      <label for="description">Tab Description:</label><br>
      {{textarea value=newTab.description}}
    </p>
    <p>
      <button type="submit">save</button>
    </p>
  </form>
{{/if}}
</script>

<script src="bower_components/jquery/jquery.js"></script>
<script src="bower_components/handlebars/handlebars.js"></script>
<script src="bower_components/ember/ember.js"></script>
<script src="bower_components/ic-tabs/dist/globals/main.js"></script>

<script>
App = Ember.Application.create({ rootElement: '#demo' });
App.ApplicationController = Ember.Controller.extend({
  selectedTabIndex: 0,

  tabs: [
    {
      name: 'Tikka Masala',
      description: "Chicken tikka masala is chicken tikka, chunks of chicken marinated in spices and yogurt, that is then baked in a tandoor oven, and served in a masala (spice mix) sauce. A tomato and coriander sauce is common, but there is no standard recipe for chicken tikka masala; a survey found that of 48 different recipes, the only common ingredient was chicken. The sauce usually includes tomatoes, frequently as puree; cream and/or coconut cream; and various spices. The sauce or chicken pieces (or both) are coloured orange with food dyes or using foodstuffs such as turmeric powder, paprika powder or tomato purée. Other tikka masala dishes replace chicken with lamb, fish or paneer."
    }
  ],

  adding: false,

  newTab: {},

  actions: {
    editNewTab: function() {
      this.set('adding', true);
    },

    saveNewTab: function() {
      var index = this.get('tabs').addObject(this.get('newTab')).length - 1;
      this.set('adding', false);
      this.set('newTab', {});
      this.set('selectedTabIndex', index)
    },

    removeTab: function(tab) {
      this.get('tabs').removeObject(tab);
    }
  }
});
</script>
